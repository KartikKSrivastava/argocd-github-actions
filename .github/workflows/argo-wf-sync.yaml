name: argo-wf-sync
on:
  push:
    branches: [ "dev" ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
  login:
    runs-on: ubuntu-latest
    steps:    
    - name: Login to ArgoWF Dev
      run: echo "Login to ArgoWF-Dev Successful!"
  linting:
    needs: [ build, login ]
    runs-on: ubuntu-latest
    steps:
    - name: Check YAML Linting
      run: echo "Linting Successful!"
  file-changed:
    needs: [ build, login, linting ]
    runs-on: ubuntu-latest
    steps:  
    - name: get changed files
      id: getfile
      run: |
          echo "::set-output name=files::$(git diff-tree --no-commit-id --name-only -r ${{ github.sha }} | xargs)"
    - name: echo output
      run: |
         echo ${{ steps.getfile.outputs.files }}
  workflow-check:
    needs: [ build, login, linting, file-changed ] 
    runs-on: ubuntu-latest
    steps:
    - name: Argo Workflow Checking
      run: |
        echo Check 1 Passed,
        echo Check 2 Passed
